'use strict';
const path = require('path');

const rootPath = path.join(__dirname, '../../../');
const secret = require(path.join(rootPath, 'secret.js')).secret;
const publicPath = path.join(rootPath, 'public');


module.exports = {
  rootPath,
  secret,
  myRender,
  publicPath
};

/*******************************************************************************
Implementation
*******************************************************************************/

function getLayoutContext(req, context) {
  const session = req.session || {
    login: false,
    username: ''
  };

  context.login = session.login;
  context.username = session.username;
}

function myRender(req, res, view, context = {}) {
  getLayoutContext(req, context);
  return res.render(view, context);
}
